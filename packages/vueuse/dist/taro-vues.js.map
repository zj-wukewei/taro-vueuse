{"version":3,"file":"taro-vues.js","sources":["../../../node_modules/@babel/runtime/helpers/defineProperty.js","../../../node_modules/@babel/runtime/helpers/objectSpread2.js","../src/useApp/index.ts","../src/utils/index.ts","../src/useToast/index.ts"],"sourcesContent":["function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var defineProperty = require(\"./defineProperty.js\");\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nmodule.exports = _objectSpread2, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","import { ref, Ref } from 'vue';\nimport { getApp } from '@tarojs/taro';\n\nimport type { App } from '@tarojs/taro';\nimport type { TRecord } from '../type';\n\nexport type TSetGlobalData = (key: string, value: unknown) => Promise<TaroGeneral.CallbackResult>;\n\nfunction useApp(allDefault?: boolean) {\n  const appInstance = getApp({ allowDefault: Boolean(allDefault) });\n\n  const globalData = ref<TRecord>(\n    appInstance.globalData ?? {}\n  );\n\n  const setGlobalDataAsync: TSetGlobalData = (key, value) => {\n    return new Promise((resolve, reject) => {\n      try {\n        const prevGlobalData = { ...globalData.value };\n        prevGlobalData[key] = value;\n        appInstance.globalData = prevGlobalData;\n        globalData.value = prevGlobalData;\n        resolve({ errMsg: 'setGlobalData: ok' });\n      } catch (e) {\n        reject({ errMsg: 'setGlobalData: fail', data: e });\n      }\n    });\n  }\n\n  return [appInstance, globalData, setGlobalDataAsync];\n}\n\nexport default useApp;","export type TimeOutPromise = (time: number) => Promise<number>\n\nexport const timeOutPromise: TimeOutPromise = (time: number) => {\n  return new Promise((resolve, reject) => {\n    try {\n      setTimeout(() => {\n        resolve(time);\n      }, time)\n    } catch (error) {\n      reject();\n    }\n  })\n}","import { showToast, hideToast } from '@tarojs/taro';\nimport { timeOutPromise } from '../utils';\n\nexport interface ToastOption {\n  title: string;\n  duration?: number;\n  icon?: 'success' | 'loading' | 'none' | 'error';\n  image?: string;\n  mask?: boolean;\n}\n\nexport type ShowToast = (option?: Partial<ToastOption>) => Promise<TaroGeneral.CallbackResult>;\n\nexport type ShowStringToast = (title: string) => Promise<TaroGeneral.CallbackResult>;\n\nexport type HideToast = () => Promise<TaroGeneral.CallbackResult>;\n\nfunction useToast(initialOption?: Partial<ToastOption>): [\n  {\n    showToastAsync: ShowToast;\n    showSuccessAsync: ShowStringToast;\n    showErrorAsync: ShowStringToast;\n    showNoneAsync: ShowStringToast;\n    showNoneTimeoutAsync: (title: string) => Promise<number>;\n  },\n  HideToast,\n] {\n  const showToastAsync: ShowToast = (option?: Partial<ToastOption>) => {\n    return new Promise((resolve, reject) => {\n      try {\n        if (!option && !initialOption) {\n          console.warn('please provide a option');\n          return reject(new Error('please provide a option'));\n        } else {\n          const options = Object.assign({}, initialOption || {}, option || {});\n          if (!options.title) {\n            reject({ errMsg: 'showToast: fail' });\n          } else {\n            showToast({\n              ...(options as ToastOption),\n              success: resolve,\n              fail: reject,\n            }).catch(reject);\n          }\n        }\n      } catch (e) {\n        reject(e);\n      }\n    });\n  };\n\n  const hideToastAsync: HideToast = () => {\n    return new Promise((resolve, reject) => {\n      try {\n        hideToast({\n          success: resolve,\n          fail: reject,\n        });\n      } catch (e) {\n        reject(e);\n      }\n    });\n  };\n\n  const showSuccessAsync: ShowStringToast = (title: string) =>\n    showToastAsync({ title, icon: 'success' });\n\n  const showErrorAsync: ShowStringToast = (title: string) =>\n    showToastAsync({ title, icon: 'error' });\n\n  const showNoneAsync: ShowStringToast = (title: string) => showToastAsync({ title, icon: 'none' });\n\n  const showNoneTimeoutAsync = (title: string) =>\n    showToastAsync({ title, icon: 'none' }).then(() => timeOutPromise(1500));\n  return [\n    {\n      showToastAsync,\n      showSuccessAsync,\n      showErrorAsync,\n      showNoneAsync,\n      showNoneTimeoutAsync,\n    },\n    hideToastAsync,\n  ];\n}\n\nexport default useToast;\n"],"names":["useApp","allDefault","appInstance","getApp","allowDefault","Boolean","globalData","ref","setGlobalDataAsync","key","value","Promise","resolve","reject","prevGlobalData","errMsg","e","data","timeOutPromise","time","setTimeout","error","useToast","initialOption","showToastAsync","option","console","warn","Error","options","Object","assign","title","showToast","success","fail","catch","hideToastAsync","hideToast","showSuccessAsync","icon","showErrorAsync","showNoneAsync","showNoneTimeoutAsync","then"],"mappings":"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"}